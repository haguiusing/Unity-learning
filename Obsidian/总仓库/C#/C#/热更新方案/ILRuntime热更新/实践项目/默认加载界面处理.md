![[LoadingPanel.cs]]
### Loading预设体制作
- 可以包含背景图，进度跳图，说明文本  
    ![](https://linwentao785293209.github.io/images/%E7%83%AD%E6%9B%B4%E6%96%B0/Unity/ILRuntime/02.ILRuntime%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/3.%E9%BB%98%E8%AE%A4%E5%8A%A0%E8%BD%BD%E7%95%8C%E9%9D%A2%E5%A4%84%E7%90%86/1.png)

loading界面逻辑处理，提供开始更新方法，使用AB包更新管理器检查更新，更新完后启动Ilruntime。可以尝试修改AB包更新管理器和Ilruntime管理器，多加几个委托方便查看信息。
```cs
public class LoadingPanel : MonoBehaviour
{
    // 进度条
    public Image imgPro;

    // 当前加载信息说明
    public Text infoTxt;

    void Start()
    {
        imgPro.rectTransform.sizeDelta = new Vector2(0, 50);
        infoTxt.text = "资源加载中";
    }

    // 需要去更新资源服务器上的AB包
    public void BeginUpdate()
    {
        // 第一个委托是用于 AB包下载更新结束后 处理逻辑的
        // 第二个委托是用于更新当前加载信息的
        AssetBundleUpdateManager.Instance.CheckUpdate(ABUpdateOverDoSomthing, (info) => { infoTxt.text = info; },
            (nowNum, maxNum) => { imgPro.rectTransform.sizeDelta = new Vector2(nowNum / maxNum * 1600, 50); });
    }

    // AB包更新完毕后需要去处理ILRuntime初始化相关的逻辑
    public void ABUpdateOverDoSomthing(bool isOver)
    {
        if (!isOver)
        {
            infoTxt.text = "AB包下载更新出错，请检查网络连接或联系服务商";
            return;
        }

        infoTxt.text = "资源加载结束";
        // ILRuntime的初始化相关
        ILRuntimeManager.Instance.StartILRuntime(() =>
        {
            // ILRuntime相关内容加载结束 就可以执行游戏逻辑了
            infoTxt.text = "游戏初始化完毕";

            // 热更相关逻辑执行
        }, (info) => { infoTxt.text = info; });
    }
}
```
### 总结
- Loading预设体可以包含背景图、进度条和说明文本。
- loading界面逻辑处理包括开始更新方法，使用AB包更新管理器检查更新，更新完后启动Ilruntime。可以尝试修改AB包更新管理器和Ilruntime管理器，多加几个委托方便查看信息。