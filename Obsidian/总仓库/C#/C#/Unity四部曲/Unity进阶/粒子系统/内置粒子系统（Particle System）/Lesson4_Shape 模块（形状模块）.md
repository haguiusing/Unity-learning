# Shape模块
此模块定义可以发射[粒子](https://docs.unity3d.com/cn/current/Manual/class-ParticleSystem.html)的体积或表面，以及开始速度的方向。**Shape** 属性定义发射体积的形状，其余模块属性根据您选择的 Shape 而变化。

所有形状（[Mesh](https://docs.unity3d.com/cn/current/Manual/class-Mesh.html) 除外）都具有定义其大小的属性，例如 **Radius** 属性。要编辑这些属性，请在 Scene 视图中拖动线框发射器形状上的控制柄。形状的选择会影响可发射粒子的区域，但也会影响粒子的初始方向。例如，__球体 (Sphere)__ 向外向各个方向发射粒子，__锥体 (Cone)__ 发射发散的粒子流，而**网格 (Mesh)** 在垂直于表面的方向上发射粒子。

## 1.Shapes  of Shape Model
### Sphere、Hemisphere(球体、半圆)
![[Pasted image 20241020230843.png]]
设置为 Sphere 模式的 Shape 模块
![[Pasted image 20241020230913.png]]
**注意**：Sphere 和 Hemisphere 具有相同的属性。

| **属性**               | **功能**                                                                               |                                                                                |
| -------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------ |
| **Shape**            | 发射体积的形状。                                                                             |                                                                                |
|                      | **Sphere**![[Pasted image 20241020224337.png]]                                       | 在所有方向均匀发射粒子。                                                                   |
|                      | **Hemisphere**![[Pasted image 20241020224343.png]]                                   | 在平面其中一面的所有方向均匀发射粒子。                                                            |
| **Radius**           | 球体或半球的半径。                                                                            |                                                                                |
| **Radius Thickness** | 球体或半球的内壁半径，1实心，0空心。发射粒子的体积比例。值为 0 表示从形状的外表面发射粒子。值为 1 表示从整个体积发射粒子。介于两者之间的值将使用体积的一定比例。 |                                                                                |
| Arc                  | 设置球体的弧度，默认360是一个球体，如果设置为180,就成了半球了（该属性如果不明白，一定要上手调节一下，瞬间就懂了）                         |                                                                                |
|                      | Arc - Mode                                                                           | 产生粒子的顺序模式，Random随机、Loop循环、Ping-Pong循环折返、Burst Spread模式（此模式若有不解，请看小标题5.Mesh的演示） |
|                      | Arc - Spread                                                                         | 只在弧线特定角度产生粒子，0则禁用                                                              |
### Cone(锥体)
![[Pasted image 20241020230822.png]]
设置为 Cone 模式的 Shape 模块

| **属性**               | **功能**                                                                  |                                                                                                                                                                                                                                                                                               |
| -------------------- | ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Shape**            | 发射体积的形状。                                                                |                                                                                                                                                                                                                                                                                               |
| **Cone**             | 从锥体的底部或主体发射粒子。根据粒子与锥体中心线的距离按比例发射粒子。![[Pasted image 20241020231200.png]] |                                                                                                                                                                                                                                                                                               |
| **Angle**            | 锥体在其顶点处的角度。角度为 0 时产生圆柱体，角度为 90 度时产生圆盘。                                  |                                                                                                                                                                                                                                                                                               |
| **Radius**           | 形状的圆形半径。                                                                |                                                                                                                                                                                                                                                                                               |
| **Radius Thickness** | 发射粒子的体积比例。值为 0 表示从形状的外表面发射粒子。值为 1 表示从整个体积发射粒子。介于两者之间的值将使用体积的一定比例。       |                                                                                                                                                                                                                                                                                               |
| **Arc**              | 形成发射器形状的整圆的角部。                                                          |                                                                                                                                                                                                                                                                                               |
|                      | **Arc-Mode**                                                            | 定义 Unity 如何在形状的弧形周围生成粒子。当此选项设置为 **Random** 时，Unity 在弧形周围随机生成粒子。如果使用 **Loop**，Unity 会在形状的弧形周围依序生成粒子，并在每个周期结束时循环回到起点。**Ping-Pong** 与 **Loop** 基本相同，不同之处在于每个连续循环的发生方向与上一个循环相反。最后，__Burst Spread__ 模式在形状周围均匀分布粒子生成位置。此模式可提供均匀的粒子扩散，不同于默认的随机化行为，默认情况下的粒子可能不均匀地聚集在一起。**Burst Spread** 最适合与爆发发射一起使用。 |
|                      | **Loop/Ping-Pong-Spread**                                               | 弧形周围可产生粒子的离散间隔。例如，值为 0 表示允许在弧形周围的任何位置生成粒子，值为 0.1 表示仅在形状周围以 10% 的间隔生成粒子。                                                                                                                                                                                                                       |
|                      | **Speed**                                                               | 发射位置围绕弧形移动的速度。使用值字段旁边的小黑色下拉菜单将此属性设置为 **Constant** 可使值始终保持不变，而设置为 **Curve** 可使值随时间变化。仅当 **Mode** 设置为 **Random** 以外的其他设置时，此选项才可用                                                                                                                                                                |
| **Length**           | 锥体的长度。仅当 **Emit from:** 属性设置为 **Volume** 时，此选项才适用。                      |                                                                                                                                                                                                                                                                                               |
| **Emit from:**       | 锥体发射粒子的部分：__Base__ 或 **Volume**。                                        | 从哪里开始发射粒子 Base从底部开始、Volume从体积开始                                                                                                                                                                                                                                                               |
### Box(正方体)
![[Pasted image 20241020231013.png]]
设置为 Box 模式的 Shape 模块

| **属性**         | **功能**                                                                       |                                               |
| -------------- | ---------------------------------------------------------------------------- | --------------------------------------------- |
| **Shape**      | 发射体积的形状。                                                                     |                                               |
| **Box**        | 从盒体形状的边、表面或主体发射粒子。粒子在发射器对象的前向 (Z) 方向上移动。![[Pasted image 20241020231617.png]] |                                               |
| **Emit from:** | 选择盒体发射粒子的部分：__Edge**、**Shell__ 或 **Volume**。                                 | 从哪里开始发射粒子 Volume 从体积发射、Shell 从外边缘发射、Edge从边缘发射 |
|                | Box Thickness                                                                | 当设置为Shell或Edge时，控制体积厚度，从0到1                   |
### Mesh、MeshRenderer、SkinnedMeshRenderer(网格)
![[Pasted image 20241020232519.png]]
设置为 Mesh 模式的 Shape 模块
![[Pasted image 20241020232542.png]]
![[Pasted image 20241020232601.png]]
Mesh、MeshRenderer 和 SkinnedMeshRenderer 具有相同的属性。

| **属性**    | **功能**                                                                                             |                                                                                                                                                |
| --------- | -------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| **Shape** | 发射体积的形状。                                                                                           |                                                                                                                                                |
|           | **Mesh**                                                                                           | 从 Inspector 中提供的任意网格形状发射粒子。                                                                                                                    |
|           | **MeshRenderer**                                                                                   | 从引用的游戏对象网格渲染器 (Mesh Renderer) 发射粒子。                                                                                                            |
|           | **SkinnedMeshRenderer**                                                                            | 从引用的游戏对象带蒙皮的网格渲染器 (Skinned Mesh Renderer) 发射粒子。                                                                                                |
| **Type**  | 指定从何处发射粒子。选择 **Vertex** 表示从顶点发射粒子，__Edge__ 表示从边发射粒子，__Triangle__ 表示从三角面发射粒子。默认情况下，此设置为 **Vertex**。 |                                                                                                                                                |
|           | **Mode**                                                                                           | 如何为每个新粒子选择网格上的位置。对于要选择随机位置的粒子，请选择 **Random**，对于要从网格中下一个顶点发射的每个新粒子，请选择 **Loop**，而 **Ping-Pong** 类似于 Loop 模式，但会在每个循环后沿网格顶点交替方向。默认设置为 **Random**。 |
| **Mesh**  | 提供发射器形状的网格。                                                                                        |                                                                                                                                                |
|           | **Single Material**                                                                                | 指定是否从特定子网格（由材质索引号标识）发射粒子。如果启用此属性，则会显示一个数字字段，您可以使用该字段指定材质索引号。                                                                                   |
|           | **Use Mesh Colors**                                                                                | 使用网格顶点颜色调整粒子颜色，或者，如果顶点颜色不存在，则使用材质中的着色器颜色属性“Color“或”TintColor”。                                                                                 |
|           | **Normal Offset**                                                                                  | 在距离网格表面多远处发射粒子（在表面法线的方向上）                                                                                                                      |
随机模式、循环模式、循环折返模式
![[Pasted image 20241020234539.png]]
![[Pasted image 20241020234548.png]]
![[Pasted image 20241020234607.png]]
#### 网格 (Mesh) 详细信息
您可以通过选中 **Single Material** 属性来选择仅从特定材质（子网格）发射粒子，并可通过选中 **Normal Offset** 属性来沿着网格法线偏移发射位置。

要忽略网格的颜色，请选中 **Use Mesh Colors** 属性。要从网格读取纹理颜色，请将要读取的纹理分配给 **Texture** 属性。

网格必须设置为 read/write enabled 才能在粒子系统上工作。如果在 Editor 中分配网格，Unity 会为您进行此处理。但如果要在运行时分配不同的网格，则需要选中 [Import Settings](https://docs.unity3d.com/cn/current/Manual/FBXImporter-Model.html) 中的 **Read/Write Enabled** 设置。

**Mode** 属性允许粒子系统以可预测的顺序在网格表面上发射粒子。从顶点发射时，此属性允许从网格顶点数组中的下一个顶点发射每个新粒子。从边缘发射时，粒子系统可以沿着网格的三角形/线条的边缘平滑地发射粒子。

### Sprite 和 Sprite Renderer(精灵图)

![设置为 Sprite 模式的 Shape 模块](https://docs.unity3d.com/cn/current/uploads/Main/ShapeModuleSprite.png)
设置为 Sprite 模式的 Shape 模块

Sprite 和 SpriteRenderer 具有相同的属性。

| **属性**                      | **功能**                                                                                             |
| --------------------------- | -------------------------------------------------------------------------------------------------- |
| **Shape**                   | 发射体积的形状。                                                                                           |
| **Sprite**                  | 从 Inspector 中提供的精灵形状发射粒子。                                                                          |
| **SpriteRenderer**          | 从引用的游戏对象精灵渲染器 (Sprite Renderer) 发射粒子。                                                              |
| **Type**                    | 指定从何处发射粒子。选择 **Vertex** 表示从顶点发射粒子，__Edge__ 表示从边发射粒子，__Triangle__ 表示从三角形发射粒子。默认情况下，此设置为 **Vertex**。 |
| **Sprite**                  | 用于定义粒子发射器形状的精灵。                                                                                    |
| **Normal Offset**           | 在距离精灵表面多远处发射粒子（在表面法线的方向上）                                                                          |
### Circle(圆圈)
![设置为 Circle 模式的 Shape 模块](https://docs.unity3d.com/cn/current/uploads/Main/ShapeModule4.png)
设置为 Circle 模式的 Shape 模块

| **属性**                      | **功能**                                                                                                                                                                                                                                                                                      |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Shape**                   | 发射体积的形状。                                                                                                                                                                                                                                                                                    |
| **Circle**                  | 从圆形的中心或边缘均匀发射粒子。粒子仅在圆形的平面内移动。                                                                                                                                                                                                                                                               |
| **Radius**                  | 形状的圆形半径。                                                                                                                                                                                                                                                                                    |
| **Radius Thickness**        | 发射粒子的体积比例。值为 0 表示从圆形的边缘发射粒子。值为 1 表示从整个面积发射粒子。介于两者之间的值将使用面积的一定比例。                                                                                                                                                                                                                            |
| **Arc**                     | 形成发射器形状的整圆的角部。                                                                                                                                                                                                                                                                              |
| **Mode**                    | 定义 Unity 如何在形状的弧形周围生成粒子。当此选项设置为 **Random** 时，Unity 在弧形周围随机生成粒子。如果使用 **Loop__，Unity 会在形状的弧形周围依序生成粒子，并在每个周期结束时循环回到起点。**Ping-Pong__ 与 **Loop** 基本相同，不同之处在于每个连续循环的发生方向与上一个循环相反。最后，__Burst Spread__ 模式在形状周围均匀分布粒子生成位置。此模式可用于提供均匀的粒子扩散，不同于默认的随机化行为，默认情况下的粒子可能不均匀地聚集在一起。Burst Spread 最适合与爆发发射一起使用。 |
| **Spread**                  | 控制弧形周围可产生粒子的离散间隔。例如，值为 0 表示允许在弧形周围的任何位置生成粒子，值为 0.1 表示仅在形状周围以 10% 的间隔生成粒子。                                                                                                                                                                                                                   |
| **Speed**                   | 设置发射位置围绕弧形移动的速度值。使用值字段旁边的小黑色下拉选单将此属性设置为 **Constant** 可使值始终保持不变，而设置为 **Curve** 可使值随时间变化。                                                                                                                                                                                                     |
### Edge(边)
![设置为 Edge 模式的 Shape 模块](https://docs.unity3d.com/cn/current/uploads/Main/ShapeModule5.png)
设置为 Edge 模式的 Shape 模块

| **属性**     | **功能**                                                                                                                                                                                                                                                                              |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Shape**  | 发射体积的形状。                                                                                                                                                                                                                                                                            |
| **Edge**   | 从线段发射粒子。粒子在发射器对象的向上 (Y) 方向上移动。                                                                                                                                                                                                                                                      |
| **Radius** | 此 Radius 属性用于定义边的长度。                                                                                                                                                                                                                                                                |
| **Mode**   | 定义 Unity 如何沿着形状的半径生成粒子。当此选项设置为 **Random** 时，Unity 沿着半径随机生成粒子。如果使用 **Loop，Unity 会沿着形状的半径依序生成粒子，并在每个周期结束时循环回到起点。**Ping-Pong 与 **Loop** 基本相同，不同之处在于每个连续循环的发生方向与上一个循环相反。最后，__Burst Spread__ 模式沿着半径均匀分布粒子生成位置。此模式可用于提供均匀的粒子扩散，不同于默认的随机化行为，默认情况下的粒子可能不均匀地聚集在一起。Burst Spread 最适合与爆发发射一起使用。 |
| **Spread** | 沿着半径可产生粒子的离散间隔。例如，值为 0 表示允许沿着半径的任何位置生成粒子，值为 0.1 表示仅沿着半径以 10% 的间隔生成粒子。                                                                                                                                                                                                               |
| **Speed**  | 发射位置沿着半径移动的速度。使用值字段旁边的小黑色下拉选单将此属性设置为 **Constant** 可使值始终保持不变，而设置为 **Curve** 可使值随时间变化。                                                                                                                                                                                                |
### Donut(圆环)
![设置为 Donut 模式的 Shape 模块](https://docs.unity3d.com/cn/current/uploads/Main/ShapeModule6.png)
设置为 Donut 模式的 Shape 模块

| **属性**               | 功能                                                                                                                                                                                                                                                                                       |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Shape**            | 发射体积的形状。                                                                                                                                                                                                                                                                                 |
| **Donut**            | 从环面发射粒子。粒子从环面的环向外移动。                                                                                                                                                                                                                                                                     |
| **Radius**           | 主圆环的半径。                                                                                                                                                                                                                                                                                  |
| **Donus Radius**     | 外圆环的粗度。                                                                                                                                                                                                                                                                                  |
| **Radius Thickness** | 发射粒子的体积比例。值为 0 表示从圆形的边缘发射粒子。值为 1 表示从整个面积发射粒子。介于两者之间的值将使用面积的一定比例。                                                                                                                                                                                                                         |
| **Arc**              | 形成发射器形状的整圆的角部。                                                                                                                                                                                                                                                                           |
| Mode                 | 定义 Unity 如何在形状的弧形周围生成粒子。当此选项设置为 **Random** 时，Unity 在弧形周围随机生成粒子。如果使用 **Loop，Unity 会在形状的弧形周围依序生成粒子，并在每个周期结束时循环回到起点。**Ping-Pong__ 与 **Loop** 基本相同，不同之处在于每个连续循环的发生方向与上一个循环相反。最后，__Burst pread__ 模式在形状周围均匀分布粒子生成位置。此模式可用于提供均匀的粒子扩散，不同于默认的随机化行为，默认情况下的粒子可能不均匀地聚集在一起。Burst Spread 最适合与爆发发射一起使用。 |
| Spread               | 弧形周围可产生粒子的离散间隔。例如，值为 0 表示允许在弧形周围的任何位置生成粒子，值为 0.1 表示仅在形状周围以 10% 的间隔生成粒子。                                                                                                                                                                                                                  |
| Speed                | 发射位置围绕弧形移动的速度。使用值字段旁边的小黑色下拉选单将此属性设置为 **Constant** 可使值始终保持不变，而设置为 **Curve** 可使值随时间变化。                                                                                                                                                                                                     |
### Rectangle(矩形)
![设置为 Rectangle 模式的 Shape 模块](https://docs.unity3d.com/cn/current/uploads/Main/ShapeModule7.png)
设置为 Rectangle 模式的 Shape 模块

| **属性**                      | 功能                                        |
| --------------------------- | ----------------------------------------- |
| **Shape**                   | 发射体积的形状。                                  |
| **Rectangle**               | 从矩形发射粒子。粒子从矩形向上移动。                        |

## 2.Texture of Shape Model

| **属性**                      | 功能                                        |
| --------------------------- | ----------------------------------------- |
| **Texture**                 | 用于为粒子着色和丢弃粒子的纹理。                          |
| **Clip Channel**            | 纹理中用于丢弃粒子的通道。                             |
| **Clip Threshold**          | 将粒子映射到纹理上的位置时，丢弃像素颜色低于此阈值的所有粒子。           |
| **Color Affects Particles** | 粒子颜色受纹理颜色影响。                              |
| **Alpha Affects Particles** | 粒子 Alpha 受纹理 Alpha 影响。                    |
| **Bilinear Filtering**      | 在读取纹理时，无论纹理尺寸如何，均组合 4 个相邻样本以获得更平滑的粒子颜色变化。 |
我们假设粒子形状现在是一个锥桶，粒子要从桶底生成，这个纹理贴图就是一块五颜六色的湿抹布，紧紧的、刚刚好的、中肯的、合理的贴在了桶底上，严丝合缝，滴水不漏。

Color affects Particles属性用于，哪一滴水（粒子）通过了湿抹布的哪一个位置，这滴水就要被湿抹布上面的颜色所沾染，从而变色。

Alpha affects Particles属性同理，只不过变化的是透明度。

Clip Channel属性则是和Clip Threshold密切相关的，我们假设湿抹布只有三种颜色，红绿蓝，对应RGB，如果我们选择R，也就是红色，那么只有红色的水滴（预先设置为红色的粒子）才能通过湿抹布，而通过的概率，也就是阈值，就是由Clip Threshold来设置的。
![[Pasted image 20241021000125.png]]
## 3.Transform of Shape Model

| **属性**                  | 功能                                                                                                                                                                                                       |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Position**            | 将一个偏移应用于生成粒子的发射器形状。                                                                                                                                                                                      |
| **Rotation**            | 旋转生成粒子的发射器形状。                                                                                                                                                                                            |
| **Scale**               | 更改生成粒子的发射器形状的大小。                                                                                                                                                                                         |
| **Align to Direction**  | 粒子会根据它们的发射方向对齐，适用于模拟火花、射线等具有方向性的粒子效果。                                                                                                                                                                    |
| **Randomize Direction** | 将粒子方向朝随机方向混合。设置为 0 时，此设置不起作用。设置为 1 时，粒子方向完全随机。<br>给粒子的发射方向添加随机性，可以模拟不规则的发射效果，例如烟花散开的轨迹。                                                                                                                  |
| **Spherize Direction**  | 将粒子方向朝球面方向混合，从它们的[变换](http://mdeditor.infra.hq.unity3d.com/#class-Transform)中心向外行进。设置为 0 时，此设置不起作用。设置为 1 时，粒子方向从中心向外（与 Shape 设置为 Sphere 时的行为相同）。<br>将粒子的发射方向球形化，使粒子朝向发射器的外部。这在球形发射器中非常有用，可以创建爆炸或向外扩散的效果。 |
| **Randomize Position**  | 以随机量移动粒子，直至达到指定值。此属性设置为 0 时，此设置不起作用。任何其他值都会对粒子的生成位置应用一些随机性。                                                                                                                                              |

## 4.API

由于此模块是 Particle System 组件的一部分，因此您可以通过 [ParticleSystem](https://docs.unity3d.com/cn/current/ScriptReference/ParticleSystem.html) 类访问它。有关如何在运行时访问它和更改值的信息，请参阅 [Shape 模块 API 文档](https://docs.unity3d.com/cn/current/ScriptReference/ParticleSystem-shape.html)。