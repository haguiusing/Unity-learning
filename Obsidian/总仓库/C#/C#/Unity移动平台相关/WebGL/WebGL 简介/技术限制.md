# Technical limitations | 技术限制
Web technology imposes restrictions on Unity web applications which are designed to run in web browsers. Make sure you are aware of the following technical limitations before you build your application for the Web platform.  
Web 技术对 Unity Web 应用程序施加了限制，这些应用程序旨在在 Web 浏览器中运行。在为 Web 平台构建应用程序之前，请确保您了解以下技术限制。

## Platform support | 平台支持
Most popular desktop browser versions support the Unity WebGL content, but do note that different browsers offer [different level of support](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-browsercompatibility.html). For example, Unity WebGL doesn’t support Mobile devices.  
大多数流行的桌面浏览器版本都支持 Unity WebGL 内容，但请注意，不同的浏览器提供[不同级别的支持](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-browsercompatibility.html) 。例如，Unity WebGL 不支持移动设备(2023版本以后支持)。

The following features in WebGL builds are either not available or limited due to constraints of the platform itself:  
由于平台本身的限制，WebGL 构建中的以下功能要么不可用，要么受到限制：

### Lack of WebGL build debug support in Visual Studio | Visual Studio 中缺少 WebGL 构建调试支持
Visual studio doesn’t support debugging Unity WebGL builds. For more information, refer to [Debug and troubleshoot WebGL builds](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-debugging.html).  
Visual Studio 不支持调试 Unity WebGL 版本。有关更多信息，请参阅[调试 WebGL 构建并排除故障](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-debugging.html) 。

### Lack of Unity cache and caching script support | 缺少 Unity 缓存和缓存脚本支持
WebGL builds don’t support the Unity Cache and Caching Scripting API due to restricted access to the filesystem in browsers. Network requests to asset data and AssetBundles are instead cached in the browser cache. Refer to [Cache behavior in WebGL](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-caching.html).  
WebGL 版本不支持 Unity 缓存和缓存脚本 API，因为浏览器中对文件系统的访问受到限制。对资源数据和 AssetBundle 的网络请求将缓存在浏览器缓存中。请参阅 [WebGL 中的缓存行为](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-caching.html) 。

### Lack of managed threading support | 缺少托管线程支持
Managed (C#) threads aren’t supported due to the lack of a multithreaded garbage collection feature in WebAssembly. You can enable partial support for threading in the form of native C/C++ threads with the experimental **Player** setting **Native C/C++ Multithreading**. Refer to [Multithreading support](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-technical-overview.html#multithreading-support).  
由于 WebAssembly 中缺少多线程垃圾回收功能，因此不支持托管 （C#） 线程。您可以通过实验性的 **Player** 设置**本机 C/C++ 多线程** ，以本机 C/C++ 线程的形式启用对线程的部分支持。请参阅 [多线程支持](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-technical-overview.html#multithreading-support) 。

Threads aren’t supported due to the lack of threading support in JavaScript. This applies to both Unity’s internal use of threads to speed up performance, and to the use of threads in script code and managed dlls. Essentially, anything in the `System.Threading` namespace isn’t supported.  
由于 JavaScript 中缺少线程支持，因此不支持线程。这既适用于 Unity 内部使用线程来提高性能，也适用于在脚本代码和托管 dll 中使用线程。实质上，不支持 `System.Threading` 命名空间中的任何内容。

Due to this limitation, anything in the C# `System.Threading` namespace isn’t supported. For example, use of the `System.Threading.Timer` class doesn’t trigger in Web builds. As well, any timeouts specified in `System.Threading.CancellationTokenSource` don’t actually time out, because the cancellation mechanism is based on `System.Threading.Timer`.  
由于此限制，不支持 C# `System.Threading` 命名空间中的任何内容。例如，使用 `System.Threading.Timer` 类不会在 Web 生成中触发。此外，中指定的 `System.Threading.CancellationTokenSource` 任何超时实际上都不会超时，因为取消机制基于 `System.Threading.Timer`。

The following code highlights these behavioral differences:  
以下代码突出显示了这些行为差异：
```cs
using System.Threading;
using UnityEngine;

public class NoMultithreadedTimers : MonoBehaviour
{
    private Timer t;
    private static void TimerCallbackElapsed(object obj)
    {
        Debug.Log("Timer Callback Fired!"); // This will never fire in Web builds because multithreaded timers aren't available.|在Web构建中，这永远不会触发，因为多线程计时器不可用。
    }
    private void Awake()
    {
        t = new Timer(new TimerCallback(TimerCallbackElapsed), this, 1, -1);
    }
}

public class NoCancellationTokenSourceTimeouts : MonoBehaviour
{
    private CancellationTokenSource cs;
    private void Awake()
    {
        cs = new CancellationTokenSource(0); // millisecondsDelay=0 to time out immediately | millisecondsDelay=0立即超时
    }
    private void Update()
    {
        Debug.Log(cs.IsCancellationRequested.ToString()); // Will return false in Web builds since timeouts aren't tracked for cancellation tokens.| 在Web构建中返回false，因为不会跟踪取消令牌的超时。
    }
} 
```

### Networking limitations | 网络限制
There are a few **networking**[](https://docs.unity3d.com/2022.3/Documentation/Manual/UNetOverview)  [](https://docs.unity3d.com/2022.3/Documentation/Manual/Glossary.html#Networking) features that WebGL platform doesn’t support:  
WebGL 平台不支持一些 **networking** 功能：
- Browsers don’t allow direct access to IP sockets for networking due to security concerns. For more information, refer to [Web networking](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-networking.html).  
    出于安全考虑，浏览器不允许直接访问 IP 套接字以进行联网。有关更多信息，请参阅 [Web 联网](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-networking.html) 。
- .NET networking classes within the `System.Net` namespace aren’t supported.  
    不支持 `System.Net` 命名空间中的 .NET 网络类。
- WebGL platform does not support native socket access because of security limitations within browsers. Therefore, WebGL also doesn’t support features like ICMP ping or [UnityEngine.Ping](https://docs.unity3d.com/2022.3/Documentation/ScriptReference/Ping.html).  
    由于浏览器内的安全限制，WebGL 平台不支持本机套接字访问。因此，WebGL 也不支持 ICMP ping 或 [UnityEngine.Ping](https://docs.unity3d.com/2022.3/Documentation/ScriptReference/Ping.html) 等功能。
### Graphics limitations | 图形限制
There are some limitations in WebGL platform with the WebGL graphics API, which is based on the functionality of the OpenGL ES graphics library. For more information, refer to [WebGL graphics](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-graphics.html).  
使用 WebGL 图形 API 的 WebGL 平台存在一些限制，该 API 基于 OpenGL ES 图形库的功能。有关更多信息，请参阅 [WebGL 图形](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-graphics.html) 。

### Audio limitations | 音频限制
WebGL builds use a custom backend for Audio based on the **WebGL Audio** API, but it only supports the basic audio functionality. For more information, refer to [Audio in WebGL](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-audio.html).  
WebGL 构建使用基于 **WebGL Audio** API 的自定义音频后端，但它仅支持基本的音频功能。有关更多信息，请参阅 [WebGL 中的音频](https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-audio.html) 。

### Dynamic generation of code | 动态生成代码
WebGL is an AOT platform, so it doesn’t allow dynamic generation of code using `System.Reflection.Emit`. This is the same on all other **IL2CPP**[](https://docs.unity3d.com/2022.3/Documentation/Manual/IL2CPP.html) [](https://docs.unity3d.com/2022.3/Documentation/Manual/Glossary.html#IL2CPP) platforms, iOS, and most consoles.  
WebGL 是一个 AOT 平台，因此它不允许使用 `System.Reflection.Emit` 动态生成代码。这在所有其他 **IL2CPP** 平台、iOS 和大多数主机上都是相同的。

### Copy and paste | 复制和粘贴(2023版本后文档没描述)
Copy and paste works only within Unity **UI**[](https://docs.unity3d.com/2022.3/Documentation/Manual/UI-system-compare.html) [](https://docs.unity3d.com/2022.3/Documentation/Manual/Glossary.html#UI). You can’t copy and paste from the system clipboard, that is, you can’t copy or paste to or from external applications.  
复制和粘贴仅适用于 Unity **UI** 。不能从系统剪贴板复制和粘贴，也就是说，不能向外部应用程序复制或粘贴。

## Multithreading support | 多线程支持
Although Unity provides multithreading support for native C/C++ code, the Web platform doesn’t yet support C# multithreading due to limitations of WebAssembly. This means that applications built using the Web platform must run on a single C# thread.  
尽管 Unity 为本机 C/C++ 代码提供多线程支持，但由于 WebAssembly 的限制，Web 平台尚不支持 C# 多线程处理。这意味着使用 Web 平台构建的应用程序必须在单个 C# 线程上运行。

**Notes**:   **注意** ：
- The Web platform supports C/C++ multithreading only if you enable [Native C/C++ support](https://docs.unity3d.com/2022.3/Documentation/Manual/class-PlayerSettingsWebGL.html#multithreading) in the Web **Player settings**[](https://docs.unity3d.com/2022.3/Documentation/Manual/class-PlayerSettings.html) [](https://docs.unity3d.com/2022.3/Documentation/Manual/Glossary.html#PlayerSettings).  
    只有在 Web **Player settings** 中启用[本机 C/C++ 支持](https://docs.unity3d.com/2022.3/Documentation/Manual/class-PlayerSettingsWebGL.html#multithreading)时，Web 平台才支持 C/C++ 多线程处理。
- The Web platform supports multithreading, when your document is within a secure context.  
    当您的文档位于安全上下文中时，Web 平台支持多线程处理。
    The following HTTP response headers must be set by the server.  
    以下 HTTP 响应标头必须由服务器设置。
    - [Cross-Origin-Opener-Policy: same-origin  
        [Cross-origin-Opener-Policy：同源](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy)
    - [Cross-Origin-Embedder-Policy: require-corp  
        [跨源嵌入策略：require-corp](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy)
    - [Cross-Origin-Resource-Policy: cross-origin  
        [Cross-Origin-Resource-Policy：跨源](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Resource-Policy)

The recommended way to perform complex asynchronous tasks on the Web platform is to use coroutines. For more information, refer to the [coroutines](https://docs.unity3d.com/2022.3/Documentation/Manual/Coroutines.html) documentation.  
在 Web 平台上执行复杂异步任务的推荐方法是使用协程。有关更多信息，请参阅[协程](https://docs.unity3d.com/2022.3/Documentation/Manual/Coroutines.html)文档。

The following factors limit the multithreading support:  
以下因素限制了多线程支持：
### Constraints on native stack scanning | 本机堆栈扫描的约束
The Web platform uses WebAssembly, which is a bytecode format for secure and efficient execution of Unity code in web browsers. Web browsers are designed to run the code in a secure and isolated environment which blocks direct access to the native WebAssembly stack. This affects multithreaded garbage collection as the Web garbage collector runs only once at the end of every frame unlike incrementally over multiple frames on other platforms.  
Web 平台使用 WebAssembly，这是一种字节码格式，用于在 Web 浏览器中安全高效地执行 Unity 代码。Web 浏览器被设计为在安全隔离的环境中运行代码，这会阻止对本机 WebAssembly 堆栈的直接访问。这会影响多线程垃圾回收，因为 Web 垃圾回收器在每帧结束时只运行一次，这与其他平台上的多个帧增量不同。

### No pre-emptive thread signaling support | 不支持抢占式线程信号
Background Workers on the web execute code in parallel independently from each other. On native platforms, the main thread can synchronously send signals to the other threads to pause for garbage collection. This synchronous signaling isn’t supported on the web, which prevents WebAssembly compiled C# code from running in multiple threads.  
后台 Web 上的 Worker 彼此独立地并行执行代码。在原生平台上，主线程可以同步向其他线程发送信号，以暂停垃圾回收。Web 不支持此同步信号，这会阻止 WebAssembly 编译的 C# 代码在多个线程中运行。
## Build and run limitations | 生成和运行限制
Unity uses a web server with only basic functionality to host web builds created with **Build and Run** (menu: **Edit** > **Build Profiles** > **Build and Run**).  
Unity 使用仅具有基本功能的 Web 服务器来托管通过 **Build and Run** 创建的 Web 版本（菜单：**Edit** > **Build Profiles** > **Build and Run**）。

The server doesn’t support data caching, which affects:  
服务器不支持数据缓存，这会影响：
- The `.data` file, which includes all **scenes**[](https://docs.unity3d.com/2022.3/Documentation/Manual/CreatingScenes.html) [](https://docs.unity3d.com/2022.3/Documentation/Manual/Glossary.html#Scene) and assets of a build that don’t use [AssetBundles](https://docs.unity3d.com/2022.3/Documentation/Manual/AssetBundlesIntro.html) or [Addressables](https://docs.unity3d.com/Packages/com.unity.addressables@latest?subfolder=/manual/index.html).  
    `.data` 文件，其中包括生成中不使用 [AssetBundle](https://docs.unity3d.com/2022.3/Documentation/Manual/AssetBundlesIntro.html) 或 [Addressables](https://docs.unity3d.com/Packages/com.unity.addressables@latest?subfolder=/manual/index.html) 的所有 **scenes** 资产。
- Addressables and AssetBundle files.  
    Addressables 和 AssetBundle 文件。

## Additional resources  其他资源
- [Secure context  安全上下文](https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts)
- [Garbage collection  垃圾回收](https://docs.unity3d.com/2023.3/Documentation/Manual/webgl-memory.html#garbagecollection)