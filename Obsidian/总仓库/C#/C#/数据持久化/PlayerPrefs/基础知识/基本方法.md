![[Lesson1_Exercises.cs]]
![[Lesson1_PlayerPrefs 1.cs]]

### PlayerPrefs是什么
PlayerPrefs是Unity提供的可以用于存储读取玩家数据的公共类。

### 存储相关
#### PlayerPrefs的数据存储
- PlayerPrefs的数据存储类似于键值对存储，一个键对应一个值。
- 提供了存储3种数据的方法 int float string。
- 键: string类型。
- 值：int float string 对应3种API。

#### SetInt方法 SetFloat方法 SetString方法 存储数据
```cs
//设置由 key 标识的偏好的值。
PlayerPrefs.SetInt("myAge", 18);
PlayerPrefs.SetFloat("myHeight", 177.5f);
PlayerPrefs.SetString("myName", "林文韬");
```

#### Save方法 马上存储数据到硬盘中
```cs
//将所有修改的偏好写入磁盘。
//直接调用Set相关方法只会把数据存到内存里。
//当游戏结束时 Unity会自动把数据存到硬盘中。
//如果游戏不是正常结束的而是崩溃 数据是不会存到硬盘中的。
//只要调用该方法 就会马上存储到硬盘中。
PlayerPrefs.Save();
```

#### PlayerPrefs局限性
```cs
//PlayerPrefs是有局限性的 它只能存3种类型的数据。
//如果你想要存储别的类型的数据 只能降低精度 或者上升精度来进行存储。
bool sex = true;
PlayerPrefs.SetInt("sex", sex ? 1 : 0);
```

#### 如果不同类型用同一键名进行存储 会进行覆盖
```cs
PlayerPrefs.SetInt("myAge", 18);
PlayerPrefs.SetFloat("myAge", 20.2f);//覆盖上一行存储的myAge数据
```
### 读取相关
**注意：运行时只要你Set了对应键值对 即使你没有马上存储Save在本地 也能够读取出信息**

#### GetInt方法 GetFloat方法 GetString方法 读取数据
```cs
//返回偏好设置文件中与 key 对应的值（如果存在）。
//int
int age = PlayerPrefs.GetInt("myAge");
print(age);//0 int类型的myAge被float类型的myAge覆盖 会返回int类型的默认值0
//读取数据相关的方法 可以传入第二个参数充当默认值
//前提是 如果找不到myAge对应的值 就会返回函数的第二个参数 默认值
age = PlayerPrefs.GetInt("myAge", 100);
print(age);//100
//float
float height = PlayerPrefs.GetFloat("myHeight", 1000f);
print(height);//177.5
//string
string name = PlayerPrefs.GetString("myName");
print(name);
//第二个参数 默认值 对于我们的作用
//就是 在得到没有的数据的时候 就可以用它来进行基础数据的初始化
```

#### HasKey方法 判断数据是否存在
```cs
//如果 key 在PlayerPrefs已经中存在，则返回 true。
//主要用于有没有存在相同键的问题 而不是判空保护 因为就算没有也就返回默认值
if (PlayerPrefs.HasKey("myName"))
{
    print("存在myName对应的键值对数据");
}
```

### 删除数据
#### DeleteKey方法 删除指定键值对
```cs
//从PlayerPrefs中删除 key 及其对应值。
PlayerPrefs.DeleteKey("myAge");
```

#### DeleteAll方法 删除所有存储的信息
```cs
//从偏好中删除所有键和值。请谨慎使用。
PlayerPrefs.DeleteAll();
```