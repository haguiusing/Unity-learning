![[Lesson02_自定义菜单栏拓展.cs]]
![[Lesson02_AddComponentMenu.cs]]

### 特殊文件夹Editor
我们之前在学习Unity相关知识点时学习过，Editor文件夹是Unity中的特殊文件夹。所有Unity中编辑器相关的脚本都需要放置在其中。

我们在本套课程学习中，会频繁的使用到UnityEditor等命名空间。这些使用了Unity编辑器相关命名空间的脚本最终是不能被打包出去的。我们需要把这些脚本放置到Editor文件夹中，避免打包时报错。

### 在Unity菜单栏中添加自定义页签
命名空间：UnityEditor  
特性：MenuItem

用法：  
在静态函数前加上
```cs
[MenuItem("页签/一级选项/二级选项/....")]
```

作用：  
当在菜单栏点击该页签时，将执行静态函数中逻辑。

注意：
1. 不用在意继承对象，不继承Monobehaviour也没问题。
2. 斜杠必须是 / 不能是 \ 。
```cs
[MenuItem("编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun")]
private static void TestFun()
{
    Debug.Log("TestFun");
}
```
![[Pasted image 20250608160930.png]]

### 在Hierarchy窗口中添加自定义页签
命名空间：UnityEditor  
特性：MenuItem
用法：  
在静态函数前加上，并且页签命名放入GameObject路径
```cs
[MenuItem("GameObject/页签/一级选项/二级选项/....")]
```

注意：
1. 不用在意继承对象。
2. 斜杠必须是 / 。
3. 在菜单栏的GameObject中也会出现对应选项。
```cs
[MenuItem("GameObject/编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun2")]
private static void TestFun2()
{
    Debug.Log("TestFun2");
}
```

![](https://linwentao785293209.github.io/images/%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/Unity/%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/01.%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8B%93%E5%B1%95/2.png)

![[Pasted image 20250608161017.png]]

### 在Project窗口中添加自定义页签
命名空间：UnityEditor  
特性：MenuItem

用法：  
在静态函数前加上，并且页签命名放入Assets路径
```cs
[MenuItem("Assets/页签/一级选项/二级选项/....")]
```

注意：
1. 不用在意继承对象。
2. 斜杠必须是 / 。
3. 在菜单栏的Assets中也会出现对应选项。
```cs
[MenuItem("Assets/编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun3")]
private static void TestFun3()
{
    Debug.Log("TestFun3");
}
```

![](https://linwentao785293209.github.io/images/%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/Unity/%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/01.%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8B%93%E5%B1%95/4.png)

![](https://linwentao785293209.github.io/images/%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/Unity/%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/01.%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8B%93%E5%B1%95/5.png)

### 在菜单栏的Component菜单添加脚本
命名空间：UnityEngine  
特性：AddComponentMenu

用法：  
在想要通过Component菜单添加的脚本前加上
```cs
[AddComponentMenu("一级选项/二级选项/....")]
```

注意：
1. 脚本需要继承MonoBehaviour对象。
2. 斜杠必须是 / 。
3. 最后一级选项的名字可以和脚本名不一样，但是建议一致。
4. 由于给GameObject添加的脚本肯定要继承Monobehaviour，所以不放在Editor文件夹。
```cs
using UnityEngine;

[AddComponentMenu("编辑器拓展教程/Lesson02_自定义菜单栏拓展/Lesson02_AddComponentMenu")]
public class Lesson02_AddComponentMenu : MonoBehaviour
{
}
```

![](https://linwentao785293209.github.io/images/%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/Unity/%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/01.%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8B%93%E5%B1%95/6.png)
### 在Inspector对脚本右键添加菜单
命名空间：UnityEditor  
特性：MenuItem

用法：  
在静态函数前加上
```cs
[MenuItem("CONTEXT/脚本名/页签/一级选项/二级选项/....")]
```

注意：
1. 不用在意继承对象。
2. 斜杠必须是 / 。
```cs
[MenuItem("CONTEXT/Lesson02_AddComponentMenu/编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun4")]
private static void TestFun4()
{
    Debug.Log("TestFun4");
}
```

![[Pasted image 20250608161302.png]]

### 加入快捷键
单键：  
路径后 + 空格 + 下划线 + 想要的按键

组合键：  
下划线替换为
- ”%“表示ctrl
- \"“#"表示shift
- “&”表示alt

其他支持的按键：  
LEFT、RIGHT、UP、DOWN、F1..F12、HOME、END、PGUP、PGDN
```cs
[MenuItem("编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun5 _F4")]
private static void TestFun5()
{
    Debug.Log("TestFun5");
}

[MenuItem("编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun6 _A")]
private static void TestFun6()
{
    Debug.Log("TestFun6");
}

[MenuItem("编辑器拓展教程/Lesson02_自定义菜单栏拓展/TestFun7 _%#&A")]
private static void TestFun7()
{
    Debug.Log("TestFun7");
}
```

![](https://linwentao785293209.github.io/images/%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/Unity/%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/01.%E5%8E%9F%E7%94%9F%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8B%93%E5%B1%95/8.png)

### 总结
1. 使用UnityEditor命名空间的脚本必须放在Editor文件夹下，避免打包报错。
2. 添加自定义页签需要用到特性MenuItem。
3. 添加代码添加页签需要用到特性AddComponentMenu。

### 请分别默写出以下几种特性
在菜单栏自定义页签（快捷键为 ctrl + R）
在Hierarchy窗口中添加自定义页签（快捷键为Shift + R）
在Project窗口中添加自定义页签（快捷键为alt + R）
在Inspector窗口为脚本添加右键菜单（快捷键为ctrl +alt + R）
在菜单栏的Component菜单添加脚本（快捷键为ctrl +alt + R）
```cs
[MenuItem("Unity编辑器拓展/TestFun %R")]
[MenuItem("GameObject/TestFun2 #R")]
[MenuItem("Assets/TestFun3 &R")]
[MenuItem("CONTEXT/脚本名/自定义功能 %&R")]
[AddComponentMenu("Unity编辑器拓展/Lesson1_Test")]
```