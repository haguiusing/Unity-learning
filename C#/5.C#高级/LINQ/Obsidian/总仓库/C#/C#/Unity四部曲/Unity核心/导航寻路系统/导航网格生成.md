[导航网格生成](file:///D:/Obsidian%20Unity/Unity/Unity%E5%9B%9B%E9%83%A8%E6%9B%B2/Assets/Scripts/Unity%C2%B7%E6%A0%B8%E5%BF%83/%E5%AF%BC%E8%88%AA%E5%AF%BB%E8%B7%AF%E7%B3%BB%E7%BB%9F/Lesson57_%E5%AF%BC%E8%88%AA%E7%BD%91%E6%A0%BC%E7%94%9F%E6%88%90.cs)
![[Pasted image 20240926182941.png]]
![[Pasted image 20240926183017.png]]
![[Pasted image 20240926183034.png]]
![[Pasted image 20240926183050.png]]

# 升级项目以用于 AI 导航包

从 Unity 2022.2 开始，Unity 中的导航和寻路由 AI 导航包处理。

如果您的项目是在 Unity 的早期版本中使用 Navigation 功能创建的，则 AI Navigation 包会自动安装并添加到您的项目中。然后，您可以执行以下操作之一：

- 继续按原样使用您的项目
- 转换项目以使用新包

## [删除旧的组件脚本](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/UpgradeGuide.html#remove-old-component-scripts)

如果您的项目使用由从 [Unity 的 NavMeshComponents GitHub 存储库](https://github.com/Unity-Technologies/NavMeshComponents)下载的脚本定义的 NavMesh Surface、NavMesh Modifier、NavMesh Modifier Volume 或 NavMesh Link 组件，请在将 AI 导航包添加到项目之前删除这些脚本和任何关联文件。如果不删除这些脚本，则可能会在 Console 中收到与这些组件相关的冲突和错误。新组件反映的行为与项目中的旧组件相同，但使用以下组件时除外：

- NavMesh Surface （导航网格表面） 组件现在包含一个选项，用于在烘焙过程中仅使用具有 NavMesh Modifier （导航网格修饰符） 的对象。
- 现在，您可以指定是否将 NavMesh Modifier （导航网格修改器） 组件应用于层次结构中的子对象。

## [转换您的项目](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/UpgradeGuide.html#convert-your-project)

如果您想使用新包，则需要转换您的项目。在转换过程中，NavMesh Updater 会进行以下更改：

- 以前烘焙并嵌入到场景中的任何 NavMesh 现在都从在新游戏对象上创建的 NavMeshSurface 组件引用 称为 Navigation。
- 现在，任何标记为 Navigation Static 的对象都具有具有相应设置的 NavMeshModifier 组件。

要转换您的项目，请执行以下操作：

1. 在主菜单中，转到 **Window** > **AI** > **NavMesh Updater**。
2. 在 NavMesh Updater 窗口中，选择要转换的数据类型。
3. 点击 **初始化转换器** 检测并显示您选择的数据类型。
4. 选择要转换的数据。
5. 单击 **Convert Assets** 以完成转换。

## [创建新的代理类型](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/UpgradeGuide.html#create-new-agent-types)

如果不同场景中的导航网格使用不同的代理设置进行烘焙，则需要创建新的代理类型以匹配这些设置。

要创建代理类型，请执行以下操作：

1. 在主菜单中，转到 **Window** > **AI** > **Navigation**。
2. 选择 **Agents（代理**）。
3. 创建新条目并指定相关设置。

### [分配新的代理类型](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/UpgradeGuide.html#assign-new-agent-types)

创建新的代理类型后，您需要按如下方式分配它们：

- 将新创建的代理类型分配给为该场景创建的 Navigation 中各自的 NavMeshSurface。
- 将代理类型分配给要使用该导航网格的 NavMeshAgent。

要查找用于每个现有导航网格的设置，请在 **Project** 窗口中选择 NavMesh 文件。NavMesh 设置将显示在 **Inspector** 中。`.asset`