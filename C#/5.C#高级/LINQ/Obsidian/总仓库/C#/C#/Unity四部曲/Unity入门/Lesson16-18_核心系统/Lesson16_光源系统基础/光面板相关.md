# Lighting 窗口
Lighting 窗口（菜单：__Window__ > **Rendering** > __Lighting__）是 Unity 光照功能的主要控制点。使用 Lighting 窗口调整与场景中的光照有关的设置，并根据质量、烘焙时间和存储空间来优化预计算的光照数据。

## 相关 API
可以使用 [LightingSettings](https://docs.unity.cn/cn/2022.2/ScriptReference/LightingSettings.html) 和 [Lightmapping](https://docs.unity.cn/cn/2022.2/ScriptReference/Lightmapping.html) API，通过脚本执行 Lighting 窗口中提供的许多函数。

## Lighting 窗口的布局
Lighting 窗口包含以下元素：
- [Scene 选项卡](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#Scene)
- [Environment 选项卡](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#Environment)
- The [Realtime Lightmaps tab](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#RealtimeLightmaps)
- [Baked Lightmaps 选项卡](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#BakedLightmaps)
- 窗口底部[控件区域](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#ControlArea)

![](https://docs.unity.cn/cn/2022.2/uploads/Main/lighting-window-scene.png)

## Scene 选项卡
**Scene** 选项卡显示有关分配给活动场景[光照设置资源](https://docs.unity.cn/cn/2022.2/Manual/class-LightingSettings.html)的信息。如果没有为活动场景分配光照设置资源，它会显示有关[默认 LightingSettings 对象](https://docs.unity.cn/cn/2022.2/Manual/class-LightingSettings.html#DefaultLightingSettings)的信息。

Scene 选项卡分为几个部分：
- [Lighting Settings 资源控件](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#AssetControls)
- [照明设置](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#LightingSettingsProperties) - Realtime Lighting、Mixed Lighting 和 Lightmapping 设置
- [工作流设置](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#WorkflowSettings)
### Lighting Settings Asset controls（光照设置资源的控件）
使用此部分中的控件将光照设置资源分配给活动场景，或创建新的光照设置资源。

|**属性：**|**功能：**|
|---|---|
|**Lighting Settings**|分配给活动场景的光照设置资源。|
|**New Lighting Settings**|单击此按钮可在您的项目中生成新的光照设置资源，并自动将该新的光照设置资源分配给活动场景。|

### Lighting Settings（光照设置）
使用此部分可查看和编辑分配给当前场景的 Lighting Settings （照明设置） 资源或对象的属性。请参阅 [Lighting Settings 资产](https://docs.unity.cn/cn/2022.2/Manual/class-LightingSettings.html)。

### Workflow settings（工作流设置）
此部分包含可帮助您调试场景的设置。

| **属性：**                       |                                  | **功能：**                                                                                                                       |
| ----------------------------- | -------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| **GPU Baking Device**         |                                  | 使用此属性更改 Unity 用于预计算光照数据的 GPU。此属性仅在您使用 [GPU 渐进光照贴图](https://docs.unity.cn/cn/2022.2/Manual/progressive-lightmapper.html)后端时可见。 |
| **Light Probe Visualization** |                                  | 用于过滤哪些[光照探针](https://docs.unity.cn/cn/2022.2/Manual/LightProbes.html)显示在 Scene 视图中。默认值为 **Only Probes Used By Selection**。    |
|                               | Only Probes Used By Selection    | 只有影响当前选择的光照探针才会显示在 Scene 视图中。                                                                                                 |
|                               | All Probes No Cells              | 所有光照探针都将显示在 Scene 视图中。                                                                                                        |
|                               | All Probes With Cells            | 所有光照探针都将显示在 Scene 视图中，还会显示用于光照探针数据插值的四面体。                                                                                     |
|                               | 无                                | 任何光照探针都不显示在 Scene 视图中。                                                                                                        |
| **Display Weights**           |                                  | 启用此复选框时，Unity 将从用于有效选择的光照探针到用于插值的四面体上的位置绘制一条线。这是一种调试探针插值和放置问题的方法。                                                             |
| **Display Occlusion**         |                                  | 启用此复选框时，如果 **Lighting Mode** 设置为 **Shadowmask，则 Unity 将显示光照探针的遮挡数据。                                                           |
|                               | Highlight Invalid Cells          | 启用此选项可突出显示 Unity 无法用于间接光照的四面体。例如，如果光照探针非常靠近。                                                                                  |
|                               | Recalculate Environment Lighting | 启用后，如果尚未生成预计算的光照数据，Unity 会使用 [SkyManager](https://docs.unity.cn/cn/2022.2/Manual/using-skymanager.html) 自动计算所有打开场景的环境光照。      |

## Environment 选项卡

Environment 选项卡包含相关当前场景的环境光照效果的设置。内容取决于您的项目使用的渲染管线。

Environment （环境） 选项卡分为两个部分：
- [环境](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#EnvironmentSection)
- [其他设置](https://docs.unity.cn/cn/2022.2/Manual/lighting-window.html#OtherSection)

#### Environment（环境）
Environment 部分包含与光照相关的设置和控件，这些设置和控件适用于当前场景中的环境光照，例如天空盒、漫射光照和反射。
![[Pasted image 20240906151453.png]]

| **属性：**                     |                  | **功能：**                                                                                                                                                                                                                                                                                                                      |
| --------------------------- | ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Skybox Material**         |                  | [天空盒](https://docs.unity.cn/cn/2022.2/Manual/class-Skybox.html)是一种材质，它出现在场景中的所有其他对象后方，用于模拟天空或其他遥远的背景。使用此属性可选择要用于场景的天空盒。默认值是内置的默认天空盒 (Default Skybox)。                                                                                                                                                                        |
| **Sun Source**              |                  | 选择要用作场景中的太阳的光源。Unity 使用此光源来模拟太阳位置和强度对 Skybox 和场景的影响。如果将此项设置为 **None**，则 Unity 会将场景中最亮的定向光视为太阳。**Render Mode （渲染模式**） 属性设置为 **Not Important （不重要）** 的灯光不会影响天空盒。  <br>  <br>有关 **Render Mode** 设置的更多信息，请参见 [Lights](https://docs.unity.cn/Manual/class-Light.html) 的 Additional settings 部分。<br><br>太阳来源:不设置则默认使用场景中最亮的方向代表太阳。 |
| **Realtime Shadow Color**   |                  | 定义 Unity 用于在 Subtractive Lighting Mode 中渲染实时阴影的颜色。                                                                                                                                                                                                                                                                           |
| **Environment Lighting**    |                  | 此部分包含可影响当前场景中的[环境光](https://docs.unity.cn/cn/2022.2/Manual/lighting-ambient-light.html)的设置。                                                                                                                                                                                                                                  |
| **Source**                  |                  | 使用此属性可定义场景中环境光的光源颜色。默认值为 **Skybox**。                                                                                                                                                                                                                                                                                         |
|                             | **Skybox**       | 使用 **Skybox Material** 中设置的天空盒颜色来确定来自不同角度的环境光。这可以实现比 **Gradient** 更精细的效果。                                                                                                                                                                                                                                                    |
|                             | **Gradient**     | 可为来自天空、地平线和地面的环境光选择单独的颜色，并在它们之间平滑混合。                                                                                                                                                                                                                                                                                         |
|                             | **Color**        | 对所有环境光使用单调颜色。                                                                                                                                                                                                                                                                                                                |
| **Intensity Multiplier**    |                  | 使用此属性可设置场景中环境光的亮度，定义为 0 到 8 之间的值。默认值为 1。                                                                                                                                                                                                                                                                                     |
| **Environment Reflections** |                  | 此部分包含[反射探针](https://docs.unity.cn/cn/2022.2/Manual/class-ReflectionProbe.html)烘焙的全局设置，以及影响全局反射的设置。                                                                                                                                                                                                                           |
| **Source**                  |                  | 使用此设置可指定是要使用 Skybox 实现反射效果，还是使用您选择的 Cubemap。默认值为 **Skybox**。                                                                                                                                                                                                                                                                 |
|                             | **Skybox**       | 选择此选项可使用天空盒作为反射源。                                                                                                                                                                                                                                                                                                            |
|                             | **Custom**       | 选择此选项可将 Cubemap 资源或 [cube 类型的 RenderTexture](https://docs.unity.cn/cn/2022.2/Manual/class-RenderTexture.html) 用于反射。                                                                                                                                                                                                          |
| **Resolution**              |                  | 使用此属性可设置用于反射的天空盒的分辨率。仅当 **Source** 设置为 **Skybox** 时，此属性才可见。                                                                                                                                                                                                                                                                  |
| **Cubemap**                 |                  | 使用此选项可指定要用于反射目的的 Cubemap。仅当 **Source （源**） 设置为 **Cubemap （立方体贴图**） 时，此属性才可见。                                                                                                                                                                                                                                                 |
| **Compression**             |                  | 使用此属性可定义是否压缩反射纹理。默认设置是 **Auto**。                                                                                                                                                                                                                                                                                             |
|                             | **Auto**         | 如果压缩格式合适，则压缩反射纹理。                                                                                                                                                                                                                                                                                                            |
|                             | **Uncompressed** | 反射纹理以非压缩状态存储在内存中。                                                                                                                                                                                                                                                                                                            |
|                             | **Compressed**   | 压缩纹理。                                                                                                                                                                                                                                                                                                                        |
| **Intensity Multiplier**    |                  | 反射源在反射对象中可见的程度。                                                                                                                                                                                                                                                                                                              |
| **Bounces**                 |                  | 当来自一个对象的反射随后被另一个对象反射时，便发生反射反弹。使用此属性可设置反射探针评估对象之间来回反弹的次数。如果设置为 1，则 Unity 只会考虑初始反射（来自 **Reflection Source** 属性中指定的天空盒和立方体贴图）。                                                                                                                                                                                                  |

#### Other Settings
Other Settings 部分包含雾、[光环](https://docs.unity.cn/cn/2022.2/Manual/class-Halo.html)、[光晕](https://docs.unity.cn/cn/2022.2/Manual/class-Flare.html)和[剪影](https://docs.unity.cn/cn/2022.2/Manual/Cookies.html)的设置。
![[Pasted image 20240906151424.png]]

|                      | 属性：                     | 功能：                                                                                                                                                                        |
| -------------------- | ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Fog**              |                         | 在场景中启用或禁用雾效。请注意，此模式无法用于[延迟渲染路径](https://docs.unity.cn/cn/2022.2/Manual/RenderingPaths.html)。                                                                               |
|                      | Color                   | 使用拾色器设置 Unity 用于在场景中绘制雾的颜色。                                                                                                                                                |
|                      | Mode                    | 定义雾化效果随着与摄像机距离变化而积累的方式。                                                                                                                                                    |
|                      | **Linear**              | 雾效强度随着距离线性增加。                                                                                                                                                              |
|                      | Start                   | 设置在距离摄像机多远时开始雾效。                                                                                                                                                           |
|                      | End                     | 设置在距离摄像机多远时雾效完全遮挡场景游戏对象。                                                                                                                                                   |
|                      | **Exponential**         | 雾效强度随着距离呈指数增加。                                                                                                                                                             |
|                      | Density                 | 用于控制雾效的强度。雾效随着 **Density** 增加而显示为更强。                                                                                                                                       |
|                      | **Exponential Squared** | 雾效强度随着距离更快速增加（指数和平方）。                                                                                                                                                      |
|                      | Density                 | 用于控制雾效的强度。雾效随着 **Density** 增加而显示为更强。                                                                                                                                       |
| **Halo Texture**     |                         | 设置要用于在光源周围绘制[光环](https://docs.unity.cn/cn/2022.2/Manual/class-Halo.html)的纹理。                                                                                               |
| **Halo Strength**    |                         | 定义光源周围光环的可见性，值在 0 到 1 之间。                                                                                                                                                  |
| **Flare Fade Speed** |                         | 定义最初出现[镜头光晕](https://docs.unity.cn/cn/2022.2/Manual/class-LensFlare.html)之后从视图中淡出的时间（以秒为单位）。默认情况下，该值设置为 3。                                                                 |
| **Flare Strength**   |                         | 定义光源下镜头光晕的可见性，值在 0 到 1 之间。                                                                                                                                                 |
| **Spot Cookie**      |                         | 设置要用于[聚光灯的](https://docs.unity.cn/cn/2022.2/Manual/Lighting.html) [剪影（Panel）](https://docs.unity.cn/cn/2022.2/Manual/Cookies.html) 纹理。默认值为 'Soft'。要恢复为“Soft”，请选择 **None**。 |

## Realtime Lightmaps 选项卡
Realtime Lightmaps （实时光照贴图） 选项卡显示当前场景中由 Enlighten Realtime Global Illumination 系统生成的所有光照贴图的列表。如果未在项目中启用 Enlighten Realtime Global Illumination，则此选项卡将为空。

## Baked Lightmaps 选项卡
此选项卡显示[光照贴图](https://docs.unity.cn/cn/2022.2/Manual/Lightmappers.html)为当前场景生成的所有光照贴图的列表，以及[光照数据资源](https://docs.unity.cn/cn/2022.2/Manual/LightmapSnapshot.html)。如果项目中未启用烘焙全局光照 (Baked Global Illumination)，则此选项卡将为空。

## 控件区域
用于预计算光照数据的控件位于 Lighting 窗口的底部。

| **属性：**               | **功能：**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Auto Generate**     | 如果启用了 **Auto Generate**，则 Unity 会在您更改场景时自动预计算光照数据。  <br>  <br>此数据包括烘焙全局光照系统的光照贴图、Enlighten 实时全局光照系统的光照贴图、光照探针和反射探针。  <br>  <br>Unity 通常在您更改场景几秒钟后开始烘焙。如果禁用**了 Auto Generate**，则必须使用 Lighting （光照） 窗口中的 **Generate Lighting （生成光照**） 按钮或者 [Lightmapping.Bake](https://docs.unity.cn/cn/2022.2/ScriptReference/Lightmapping.Bake.html) 或 [Lightmapping.BakeAsync](https://docs.unity.cn/cn/2022.2/ScriptReference/Lightmapping.BakeAsync.html) API 自行手动调用烘焙。  <br>  <br>使用 **Auto Generate** 预计算光照数据时，Unity 不会将场景的预计算光照数据存储为项目中的资源。相反，Unity 将此数据存储在内存中，并将其作为场景的一部分进行序列化。  <br>  <br>仅当活动场景分配了 Lighting Settings Asset 时，此属性才可用。  <br>  <br>注意：从 Unity Editor 版本 2022.2 开始，安装 [Entities](https://docs.unity.cn/Packages/com.unity.entities@latest/) 包后，**自动生成**模式不可用。在安装了 Entities 包的项目中生成光照时，Unity Editor 会打开所有加载的子场景，这可能会降低 Editor 的性能。 |
| **Generate Lighting** | 单击 **Generate Lighting** 按钮以预先计算所有打开场景的照明数据。此数据包括烘焙全局光照系统的光照贴图、Enlighten 实时全局光照系统的光照贴图、光照探针和反射探针。  <br>  <br>单击 **Generate Lighting** 右侧的下拉菜单，然后单击 **Bake Reflection Probes** 以仅烘焙所有打开场景的反射探针。  <br>  <br>单击 **Generate Lighting** 右侧的下拉菜单，然后单击 **Clear Baked Data** 以从所有打开的场景中清除所有预计算的光照数据，而不清除 [GI 缓存](https://docs.unity.cn/cn/2022.2/Manual/GICache.html)。  <br>  <br>仅当禁用**了 Auto Generate** 时，才会启用此按钮。                                                                                                                                                                                                                                                                                                                                                                                                                           |

---

- [光照设置资源]添加于 [2020.1](https://docs.unity.cn/2020.1/Documentation/Manual/30_search.html?q=newin20201)