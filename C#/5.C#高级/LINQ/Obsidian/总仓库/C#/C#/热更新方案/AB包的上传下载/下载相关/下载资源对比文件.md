[D:\Obsidian Unity\Unity\HotUpdate\Assets\Scripts\ABUpdateMgr.cs](file:///d%3A/Obsidian%20Unity/Unity/HotUpdate/Assets/Scripts/ABUpdateMgr.cs)

![[Pasted image 20250602203608.png]]

### **4. 下载远端资源对比文件**
```csharp
public async void DownLoadABCompareFile(UnityAction<bool> overCallBack)
```
- **功能**：从服务器下载资源对比文件（`ABCompareInfo.txt`）。
- **实现**：
  - 使用 `FtpWebRequest` 从 FTP 服务器下载文件。
  - 将下载的文件保存到本地临时路径（`Application.persistentDataPath + "/ABCompareInfo_TMP.txt"`）。
  - 如果下载失败，会尝试重新下载最多 5 次。
### **5. 解析对比文件**
```csharp
public void GetRemoteABCompareFileInfo(string info, Dictionary<string, ABInfo> ABInfo)
```
- **功能**：解析对比文件的内容。
- **格式**：假设对比文件内容格式为 `AB包名 MD5 文件大小|`，例如：
  ```
  bundle1 abcd1234 1024|bundle2 efgh5678 2048|
  ```
- **解析**：
  - 使用 `|` 分割每一行，获取每个 AB 包的信息。
  - 使用空格分割每个 AB 包的详细信息（名称、MD5、大小）。
  - 将解析后的信息存储到字典中。